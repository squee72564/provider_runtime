{
  "provider": "openrouter",
  "scenario": "invalid_tool_payload",
  "captured_at": "2026-02-27T06:00:48.174Z",
  "request": {
    "url": "https://openrouter.ai/api/v1/chat/completions",
    "method": "POST",
    "model": "openai/gpt-5-mini",
    "headers": {
      "Authorization": "<redacted>",
      "Content-Type": "application/json"
    },
    "body": {
      "messages": [
        {
          "role": "system",
          "content": "You are a helpful assistant."
        },
        {
          "role": "user",
          "content": "Use weather tool."
        }
      ],
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_weather",
            "description": "Get weather",
            "parameters": "invalid-parameters"
          }
        }
      ],
      "tool_choice": {
        "type": "function",
        "function": {
          "name": "missing"
        }
      },
      "max_tokens": 64,
      "model": "openai/gpt-5-mini"
    }
  },
  "response": {
    "status": 400,
    "status_text": "Bad Request",
    "headers": {
      "access-control-allow-origin": "*",
      "cf-ray": "9d4576c71c5b08ee-LAX",
      "connection": "keep-alive",
      "content-type": "application/json",
      "date": "Fri, 27 Feb 2026 06:00:48 GMT",
      "permissions-policy": "payment=(self \"https://checkout.stripe.com\" \"https://connect-js.stripe.com\" \"https://js.stripe.com\" \"https://*.js.stripe.com\" \"https://hooks.stripe.com\")",
      "referrer-policy": "no-referrer, strict-origin-when-cross-origin",
      "server": "cloudflare",
      "transfer-encoding": "chunked",
      "x-content-type-options": "nosniff"
    },
    "body": {
      "error": {
        "message": "0.function.parameters: Invalid input: expected object, received string",
        "code": 400,
        "metadata": {
          "provider_name": "Azure"
        }
      },
      "user_id": "user_36xUKicUd09o37yU25oy6GgRHVr"
    }
  },
  "normalized_error": {
    "message": "OpenRouter HTTP 400 Bad Request",
    "error_class": "OpenRouterHttpError"
  }
}